<% if params[:commit] == "選択編集" %>
  <h1>選択編集画面</h1>
<% else %>
  <h1>選択削除画面</h1>
<% end %>


<p>
<font color = "#006400"><b>項目を確認してください</b></font>
</p>




<%= form_tag('/users_select_edit_all') do %>

  <% if params[:commit] == "選択編集" %>
    <div class="field" style="float:left;">
      <%= label_tag :年 %> 
      <%=select_tag 'user[grade]',options_for_select({１:"1",２:"2",３:"3"}) %>
    </div>

    <div class="field" style="float:left;">
      <%= label_tag :組 %> 
      <%=select_tag 'user[class_room]',options_for_select({１:"1",２:"2",３:"3",４:"4"}) %>
    </div>

    <br>
    <div style="float:left;"><%=submit_tag "選択編集", onclick: "return isCheck()" %></div>

  <% else %>

    <%=submit_tag "選択削除", onclick: "return isCheck()" %>

  <% end %>



  <table border="1" width="100%">

    <div align="right">
      <%= link_to '一覧に戻る', users_path %>
    </div>

    <thead>

    
      <tr>    
        <th></th>
        <th>年</th>
        <th>組</th>
        <th>番</th>
        <th>名前</th>
        <th>性別</th>
        <th></th>
        <th></th>
      </tr>
    </thead>

    <tbody>
      <% @users.each do |user| %>
  
        <tr>
          <td width="5%" align="center"><%= check_box_tag "select_datas[#{ user.id }]", user.id, {:checked => "checked"},:class => "list" %></td>
          <td width="5%" align="center"><%= user.grade %></td>
          <td width="5%" align="center"><%= user.class_room %></td>
          <td width="5%" align="center"><%= user.id %></td>
          <td width="40%" align="center"><%= user.name %></td>
          <td width="10%" align="center"><%= user.gender %></td>
          <td width="15%" align="center"><%= link_to '編集', edit_user_path(user) %></td>
          <td width="15%" align="center"><%= link_to '詳細', user %></td>
        </tr>
      <% end %>
    </tbody>
  </table>


<% end %>

<script type="text/javascript">
function isCheck() {
	var arr_checkBoxes = document.getElementsByClassName("list");
	var count = 0;
	for (var i = 0; i < arr_checkBoxes.length; i++) {
		if (arr_checkBoxes[i].checked) {
			count++;
		}
	}
	if (count > 0) {
		return true;
	} else {
		window.alert("項目を選択してください。");
		return false;
	}
}
</script>


